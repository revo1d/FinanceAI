<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinanceAI</title>
</head>
<body>
    <h1>Добро пожаловать в FinanceAI!</h1>
    <div>
        <input type="number" id="income" placeholder="Введите сумму дохода">
        <button onclick="addIncome()">Добавить доход</button>
    </div>
    
    <h3>История</h3>
    <div id="history-list"></div>
    <button onclick="getHistory()">Показать историю</button>

    <script>
        // URL твоего сервера (если сервер работает локально или на другом хостинге, укажи его)
        const serverUrl = 'http://localhost:3000';  // Заменить на URL твоего сервера

        // Функция для добавления данных о доходе
        function addIncome() {
            let income = document.getElementById("income").value;  // Получаем значение дохода
            if (income && !isNaN(income)) {
                const userTelegramId = "USER_TELEGRAM_ID";  // Заменить на ID из бота

                // Отправляем данные на сервер
                fetch(`${serverUrl}/saveData`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ userId: userTelegramId, income: income })
                })
                .then(response => response.json())
                .then(data => alert('Доход добавлен!'))
                .catch(error => console.error('Ошибка:', error));
            } else {
                alert("Пожалуйста, введите корректную сумму.");
            }
        }

        // Функция получения истории
        function getHistory() {
            const userTelegramId = "USER_TELEGRAM_ID";  // Заменить на ID из бота

            fetch(`${serverUrl}/getHistory/${userTelegramId}`)
                .then(response => response.json())
                .then(data => {
                    const historyList = document.getElementById("history-list");
                    historyList.innerHTML = "";
                    data.forEach(entry => {
                        const listItem = document.createElement("div");
                        listItem.innerHTML = `Тип: ${entry.type}, Сумма: ${entry.amount}, Категория: ${entry.category}`;
                        historyList.appendChild(listItem);
                    });
                })
                .catch(error => console.error('Ошибка:', error));
        }
    </script>
</body>
</html>
